
[root@controller ~]# openstack user list
Missing value auth-url required for auth plugin password
[root@controller ~]# ls
anaconda-ks.cfg  keystonerc_admin  openstack.orig  openstack.txt  stack1-key1.pem  user1-key1.pem
[root@controller ~]# cat keystonerc_admin
unset OS_SERVICE_TOKEN
    export OS_USERNAME=admin
    export OS_PASSWORD='abc123'
    export OS_REGION_NAME=RegionOne
    export OS_AUTH_URL=http://10.0.0.100:5000/v3
    export PS1='[\u@\h \W(keystone_admin)]\$ '
    
export OS_PROJECT_NAME=admin
export OS_USER_DOMAIN_NAME=Default
export OS_PROJECT_DOMAIN_NAME=Default
export OS_IDENTITY_API_VERSION=3
[root@controller ~]# source keystonerc_admin
[root@controller ~(keystone_admin)]# openstack user list
+----------------------------------+-----------+
| ID                               | Name      |
+----------------------------------+-----------+
| 33791b8d8d994d699dd9a93a97e36bd2 | placement |
| 478bbe731afe4161b769dc6785a9525b | cinder    |
| 4e4b07f5f5604993a73b31858bc79ebd | nova      |
| 9cb50b264eb14e399ea589b2ae03e400 | admin     |
| ce6f88b09da941ae90fa8715f8e496b7 | user1     |
| e125e5e492fe4fa892783b50ccd2277b | swift     |
| f5cf93a87e0b43dc9abca9bf07f229e2 | stack1    |
| f692fa6658ec4f0b997dbfeae040f8be | glance    |
| f769f5bdba2f4b1292b190c7751f7d4d | mgr1      |
| fd4ca4c87cbe4603a7076c9bcae8bdf8 | neutron   |
+----------------------------------+-----------+
[root@controller ~(keystone_admin)]# openstack service list
+----------------------------------+-----------+--------------+
| ID                               | Name      | Type         |
+----------------------------------+-----------+--------------+
| 135519a3708a4eb5b29e0bfadbf2e788 | nova      | compute      |
| 473837b4ccb54afeb75a907aa7bd4035 | neutron   | network      |
| 4f40892bf3a04e679b1881666985d6eb | keystone  | identity     |
| 5c3fb91c8d84497c851709a40d21ffdb | glance    | image        |
| 8238b83788cb437280787aea5554d2c0 | cinderv2  | volumev2     |
| 90220df2efa449bdaaef76356e61c566 | cinderv3  | volumev3     |
| bef4d4a5a2e840f38051cde6a8f835f8 | placement | placement    |
| c63a89466f794e68948d2fa03bc29e0b | swift     | object-store |
| e3247ba0a553453eab3a55f6cf886b4a | cinder    | volume       |
+----------------------------------+-----------+--------------+
[root@controller ~(keystone_admin)]# openstack role list
+----------------------------------+---------------+
| ID                               | Name          |
+----------------------------------+---------------+
| 1f75b01ca8364050a55f6bb7cf92b2c9 | ResellerAdmin |
| 2160c3fd446d42bb86eacbd37053d4e9 | member        |
| 29b5c73ed0434f2d8b244b171d1d6255 | admin         |
| 9fe2ff9ee4384b1894a90878d3e92bab | _member_      |
| dd23c492593e43abbb26e702fd83a4c9 | SwiftOperator |
| dd54760193bf4eaf87e03c0c1e687f04 | reader        |
+----------------------------------+---------------+
[root@controller ~(keystone_admin)]# openstack project list
+----------------------------------+----------+
| ID                               | Name     |
+----------------------------------+----------+
| 16be769a76da4a3c9cb7e0b54f84177a | services |
| 9bd266f8d172431cb2ec38d7defb1154 | team1    |
| baea7c203fec43f0b322af47bdc79a84 | admin    |
| cc4438f8699c4182ae11c7b773edb544 | pro1     |
+----------------------------------+----------+
[root@controller ~(keystone_admin)]# openstack role list --user stack1 --project pro1

[root@controller ~(keystone_admin)]# openstack project create --description "Demo Project" demo
+-------------+----------------------------------+
| Field       | Value                            |
+-------------+----------------------------------+
| description | Demo Project                     |
| domain_id   | default                          |
| enabled     | True                             |
| id          | eeff0f3fc71b42caad0823a8826168f3 |
| is_domain   | False                            |
| name        | demo                             |
| parent_id   | default                          |
| tags        | []                               |
+-------------+----------------------------------+
[root@controller ~(keystone_admin)]# openstack user create --password abc123 --project demo demo
+---------------------+----------------------------------+
| Field               | Value                            |
+---------------------+----------------------------------+
| default_project_id  | eeff0f3fc71b42caad0823a8826168f3 |
| domain_id           | default                          |
| enabled             | True                             |
| id                  | 4da894d1490841179d40f339b2916c0e |
| name                | demo                             |
| options             | {}                               |
| password_expires_at | None                             |
+---------------------+----------------------------------+
[root@controller ~(keystone_admin)]# #openstack role add --project demo --user demo _member_
[root@controller ~(keystone_admin)]# openstack role list --project demo --user demo
Listing assignments using role list is deprecated. Use role assignment list --user <user-name> --project <project-name> --names instead.

[root@controller ~(keystone_admin)]# 

```shell
[root@controller ~]# cp keystonerc_admin keystonerc_stack1
[root@controller ~]# vi keystonerc_stack1
unset OS_SERVICE_TOKEN
    export OS_USERNAME=stack1
    export OS_PASSWORD='abc123'
    export OS_REGION_NAME=RegionOne
    export OS_AUTH_URL=http://10.0.0.100:5000/v3
    export PS1='[\u@\h \W(keystone_stack1)]\$ '
    
export OS_PROJECT_NAME=stack1
export OS_USER_DOMAIN_NAME=Default
export OS_PROJECT_DOMAIN_NAME=Default
export OS_IDENTITY_API_VERSION=3
[root@controller ~(keystone_stack1)]# source keystonerc_stack1
[root@controller ~(keystone_stack1)]# openstack token issue
+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Field      | Value                                                                                                                                                                                   |
+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| expires    | 2020-01-02T05:50:42+0000                                                                                                                                                                |
| id         | gAAAAABeDXaieQupfmDu4SUUD6XTO0a3STLjoB9ApInu2K7JPkRXI9rTfJU2j4kfxOlokEV_Km1afdNWvfH01zaYelD6k_aB_BJjwq31q3Hi5eulhxYLA3LnwRbnTBCXDmOn2BVKC7-lxIRjnsmMsiTmf_Ub3Y4xpay4kqcp0MfqQTBb_2caZJQ |
| project_id | cc4438f8699c4182ae11c7b773edb544                                                                                                                                                        |
| user_id    | f5cf93a87e0b43dc9abca9bf07f229e2                                                                                                                                                        |
+------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
```

